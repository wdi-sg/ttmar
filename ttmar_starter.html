<!DOCTYPE html>
<html>
  
<head>
  <meta charset="utf-8">
  <title>Take the money and run</title>
  <style>
    body{
      text-align: center;
    }
  </style>
  <script>
    let __clickCount = 0;
    let __prevColour;
    let __colourResetTimer = null;

    function resetBackgroundColour () {
      document.querySelector('body').style.backgroundColor = __prevColour;
      __colourResetTimer = null
    }

    function changeBackgroundToRandomColour () {
      __prevColour = document.querySelector('body').style.backgroundColor;
      let hex = '0123456789ABCDEF';
      let colour = '#';
      for (let i = 0; i < 6; i++) {
        colour += hex[Math.floor(Math.random() * 16)];
      };
      document.querySelector('body').style.backgroundColor = colour;
      if (__colourResetTimer != null) {
        clearTimeout(__colourResetTimer);
      }
      __colourResetTimer = setTimeout(resetBackgroundColour, 5000);
      
    }
    
    function clickIncrement () {
      __clickCount++;
      if (__clickCount == 5) {
        alert('Five clicks reached');
      }
    }

    function revealElement () {
      let name = document.getElementById('elem-to-reveal').value;
      let elemList = document.querySelectorAll('.' + name);
      if (elemList.length > 0) {
        elemList.forEach(elem => {elem.style.display = 'block'})
      } else {
        alert("You need to give a valid class name!");
      }
    }

    document.addEventListener('DOMContentLoaded', () => {

      let links = document.querySelectorAll('a');
      
      links[0].addEventListener('click', () => {
        document.querySelector('body').style.backgroundColor = 'green';
        clickIncrement();
      });

      [links[1], links[2]].forEach(l => {
        l.addEventListener('click', e => {
          clickIncrement();
          changeBackgroundToRandomColour();
          e.target.parentNode.nextElementSibling.style.display = 'block';
        })
      });

      [links[3], links[4]].forEach((l) => {
        l.addEventListener('click', (e) => {
          clickIncrement();
          changeBackgroundToRandomColour();
          let prefix = e.target.getAttribute('id').split('_')[0];
          document.querySelectorAll('.' + prefix + '_paragraph').forEach((elem) => {
            elem.style.display = 'block';
          })
        })
      });

      links[5].addEventListener('click', e => {
        clickIncrement();
        changeBackgroundToRandomColour();
        let elem = e.target.parentNode.nextElementSibling;
        while (elem.getAttribute('class') == 'second_chorus') {
          if (elem.style.display == 'none') {
            elem.style.display = 'block';
            break;
          };
          elem = elem.nextElementSibling;
        };
      });

      document.getElementById('reveal-button').addEventListener('click', revealElement);
    });
    

  </script>
</head>
<body>
  <input id="elem-to-reveal" type="text" name="elem-to-reveal" /><button id="reveal-button" name="Reveal">Reveal</button>
  <h1>Take the Money and Run</h1>
  <p><a id="first_paragraph" href="#">Click me first!</a></p>
  <div class="first_paragraph" style="color:white">
    This here's a story about Billy Joe and Bobbie Sue<br>
    Two young lovers with nothin' better to do<br>
    Than sit around the house, have fun, and watch the tube<br>
    And here is what happened when they decided to cut loose<br>
  </div>

  <p><a id="second_paragraph" href="#">Click me Second!</a></p>
  <div class="second_paragraph" style="display:none">
    They headed down to, ooh, old El Paso<br>
    That's where they ran into a great big hassle<br>
    Billy Joe shot a man while robbing his castle<br>
    Bobbie Sue took the money and run
  </div>

  <p><a id="first_chorus" href="#">Click me Third!</a></p>
  <div class="first_chorus" style="display:none">
    Go on take the money and run<br>
    Go on take the money and run<br>
    Go on take the money and run<br>
    Go on take the money and run
  </div>

  <p><a id="third_paragraph" href="#">Click me Fourth!</a></p>
  <p class="third_paragraph" style="display:none">Billy Mack is a detective down in Texas</p>
  <p class="third_paragraph" style="display:none">You know he knkows just exactly what the facts is</p>
  <p class="third_paragraph" style="display:none">He ain't gonna let those two escape justice</p>
  <p class="third_paragraph" style="display:none">He makes his livin' off of the people's taxes</p>

  <p><a id="fourth_paragraph" href="#">Click me Fifth!</a></p>
  <p class="fourth_paragraph" style="display:none">Bobbie Sue, whoa, whoa, she slipped away</p>
  <p class="fourth_paragraph" style="display:none">Billy Joe caught up to her the very next day</p>
  <p class="fourth_paragraph" style="display:none">They got the money, hey</p>
  <p class="fourth_paragraph" style="display:none">You know they got away</p>
  <p class="fourth_paragraph" style="display:none">They headed down south and they're still running today</p>
  <p class="fourth_paragraph" style="display:none">Singin' go on take the money and run</p>

  <p><a id="second_chorus" href="#">Click me 6 times!</a></p>
  <p class="second_chorus" style="display:none">Go on take the money and run</p>
  <p class="second_chorus" style="display:none">Go on take the money and run</p>
  <p class="second_chorus" style="display:none">Go on take the money and run</p>
  <p class="second_chorus" style="display:none">Go on take the money and run</p>
  <p class="second_chorus" style="display:none">Go on take the money and run</p>
  <p class="second_chorus" style="display:none">Go on take the money and run</p>


  <script>

  </script>
</body>
</html>
